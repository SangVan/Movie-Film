{"ast":null,"code":"import _regeneratorRuntime from \"D:/HTML/FRONT_END_MyClass.vn/react/DemoTwlwindCSS/install-tailwind-css-in-reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"D:/HTML/FRONT_END_MyClass.vn/react/DemoTwlwindCSS/install-tailwind-css-in-reactjs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { quanLyDatVeService } from \"../../services/QuanLyDatVeService\";\nimport { ThongTinDatVe } from \"../../_core/models/ThongTinDatVe\";\nimport { connection } from \"../../index\";\nimport { DAT_VE, DAT_VE_HOAN_TAT, SET_CHI_TIET_PHONG_VE } from \"./types/QuanLyDatVeType\";\nimport Swal from \"sweetalert2\";\nimport { layThongTinUserAction } from \"./QuanLyNguoiDungAction\";\nexport var layChiTietPhongVeAction = function layChiTietPhongVeAction(maLichChieu) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch) {\n      var result, _error$response;\n\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return quanLyDatVeService.layChiTietPhongVe(maLichChieu);\n\n            case 3:\n              result = _context.sent;\n\n              if (result.status === 200) {\n                dispatch({\n                  type: SET_CHI_TIET_PHONG_VE,\n                  chiTietPhongVe: result.data.content\n                });\n              }\n\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(\"error\", (_error$response = _context.t0.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var datVeAction = function datVeAction() {\n  var thongTinDatVe = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new ThongTinDatVe();\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch, getState) {\n      var result, timerInterval, userLogin;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return quanLyDatVeService.datVe(thongTinDatVe);\n\n            case 3:\n              result = _context2.sent;\n\n              if (!(result.status === 200)) {\n                _context2.next = 15;\n                break;\n              }\n\n              _context2.next = 7;\n              return Swal.fire({\n                title: \"Đặt vé thành công\",\n                html: \"Chúc bạn xem phim vui vẻ nhé!\",\n                timer: 3000,\n                timerProgressBar: true,\n                willClose: function willClose() {\n                  clearInterval(timerInterval);\n                }\n              });\n\n            case 7:\n              _context2.next = 9;\n              return dispatch({\n                type: DAT_VE_HOAN_TAT\n              });\n\n            case 9:\n              _context2.next = 11;\n              return dispatch(layChiTietPhongVeAction(thongTinDatVe.maLichChieu));\n\n            case 11:\n              _context2.next = 13;\n              return dispatch(layThongTinUserAction());\n\n            case 13:\n              userLogin = getState().QuanLyNguoiDungReducer.userLogin;\n              connection.invoke(\"datGheThanhCong\", userLogin.taiKhoan, thongTinDatVe.maLichChieu);\n\n            case 15:\n              _context2.next = 20;\n              break;\n\n            case 17:\n              _context2.prev = 17;\n              _context2.t0 = _context2[\"catch\"](0);\n              Swal.fire({\n                title: \"Error!\",\n                text: _context2.t0.response.data,\n                icon: \"error\",\n                confirmButtonText: \"Ok\"\n              });\n\n            case 20:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 17]]);\n    }));\n\n    return function (_x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var datGheAction = function datGheAction(ghe, maLichChieu) {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch, getState) {\n      var danhSachGheDangDat, taiKhoan;\n      return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return dispatch({\n                type: DAT_VE,\n                gheDuocChon: ghe\n              });\n\n            case 2:\n              //Lấy dữ liệu từ redux về thông qua getState\n              danhSachGheDangDat = getState().QuanLyDatVeReducer.danhSachGheDangDat;\n              taiKhoan = getState().QuanLyNguoiDungReducer.userLogin.taiKhoan; //Biến mảng thành chuỗi\n\n              danhSachGheDangDat = JSON.stringify(danhSachGheDangDat); //Call api signalR\n\n              connection.invoke(\"datGhe\", taiKhoan, danhSachGheDangDat, maLichChieu);\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x4, _x5) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"names":["quanLyDatVeService","ThongTinDatVe","connection","DAT_VE","DAT_VE_HOAN_TAT","SET_CHI_TIET_PHONG_VE","Swal","layThongTinUserAction","layChiTietPhongVeAction","maLichChieu","dispatch","layChiTietPhongVe","result","status","type","chiTietPhongVe","data","content","console","log","response","datVeAction","thongTinDatVe","getState","datVe","fire","title","html","timer","timerProgressBar","willClose","clearInterval","timerInterval","userLogin","QuanLyNguoiDungReducer","invoke","taiKhoan","text","icon","confirmButtonText","datGheAction","ghe","gheDuocChon","danhSachGheDangDat","QuanLyDatVeReducer","JSON","stringify"],"sources":["D:/HTML/FRONT_END_MyClass.vn/react/DemoTwlwindCSS/install-tailwind-css-in-reactjs/src/redux/actions/QuanLyDatVeActions.js"],"sourcesContent":["import { quanLyDatVeService } from \"../../services/QuanLyDatVeService\";\nimport { ThongTinDatVe } from \"../../_core/models/ThongTinDatVe\";\nimport { connection } from \"../../index\";\nimport {\n  DAT_VE,\n  DAT_VE_HOAN_TAT,\n  SET_CHI_TIET_PHONG_VE,\n} from \"./types/QuanLyDatVeType\";\nimport Swal from \"sweetalert2\";\nimport { layThongTinUserAction } from \"./QuanLyNguoiDungAction\";\n\nexport const layChiTietPhongVeAction = (maLichChieu) => {\n  return async (dispatch) => {\n    try {\n      const result = await quanLyDatVeService.layChiTietPhongVe(maLichChieu);\n\n      if (result.status === 200) {\n        dispatch({\n          type: SET_CHI_TIET_PHONG_VE,\n          chiTietPhongVe: result.data.content,\n        });\n      }\n    } catch (error) {\n      console.log(\"error\", error.response?.data);\n    }\n  };\n};\n\nexport const datVeAction = (thongTinDatVe = new ThongTinDatVe()) => {\n  return async (dispatch, getState) => {\n    try {\n      const result = await quanLyDatVeService.datVe(thongTinDatVe);\n      if (result.status === 200) {\n        let timerInterval;\n        await Swal.fire({\n          title: \"Đặt vé thành công\",\n          html: \"Chúc bạn xem phim vui vẻ nhé!\",\n          timer: 3000,\n          timerProgressBar: true,\n          willClose: () => {\n            clearInterval(timerInterval);\n          },\n        });\n        await dispatch({\n          type: DAT_VE_HOAN_TAT,\n        });\n        await dispatch(layChiTietPhongVeAction(thongTinDatVe.maLichChieu));\n        await dispatch(layThongTinUserAction());\n\n        let userLogin = getState().QuanLyNguoiDungReducer.userLogin;\n        connection.invoke(\n          \"datGheThanhCong\",\n          userLogin.taiKhoan,\n          thongTinDatVe.maLichChieu\n        );\n      }\n    } catch (error) {\n      Swal.fire({\n        title: \"Error!\",\n        text: error.response.data,\n        icon: \"error\",\n        confirmButtonText: \"Ok\",\n      });\n    }\n  };\n};\n\nexport const datGheAction = (ghe, maLichChieu) => {\n  return async (dispatch, getState) => {\n    await dispatch({\n      type: DAT_VE,\n      gheDuocChon: ghe,\n    });\n\n    //Lấy dữ liệu từ redux về thông qua getState\n    let danhSachGheDangDat = getState().QuanLyDatVeReducer.danhSachGheDangDat;\n    let taiKhoan = getState().QuanLyNguoiDungReducer.userLogin.taiKhoan;\n\n    //Biến mảng thành chuỗi\n    danhSachGheDangDat = JSON.stringify(danhSachGheDangDat);\n\n    //Call api signalR\n    connection.invoke(\"datGhe\", taiKhoan, danhSachGheDangDat, maLichChieu);\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}